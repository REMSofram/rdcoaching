# ğŸ“Š Task Graphique - SpÃ©cifications Techniques
## Application de Suivi Sportif RD Coaching

---

## ğŸ¯ Vue d'ensemble

ImplÃ©mentation d'un graphique combinÃ© pour le suivi des indicateurs clients avec contrÃ´les interactifs et adaptation responsive selon la pÃ©riode sÃ©lectionnÃ©e.

---

## ğŸ“‹ Structure des DonnÃ©es

### Format des donnÃ©es d'entrÃ©e
```javascript
const dataPoint = {
  date: '12/09',                    // Format court pour affichage
  dateLabel: 'vendredi 12 septembre 2025', // Format complet pour tooltip
  poids: 70.6,                      // Poids en kg (dÃ©cimal)
  sommeil: 6,                       // Score sommeil sur 10 âš ï¸
  energie: 2,                       // Score Ã©nergie sur 5
  appetit: 3,                       // Score appÃ©tit sur 5
  sommeilConverti: 3                // Conversion automatique sommeil/2 pour affichage
}
```

### âš ï¸ Conversion Automatique Sommeil
- **DonnÃ©es source** : Sommeil notÃ© sur `/10`
- **Affichage graphique** : Converti automatiquement sur `/5` (division par 2)
- **Tooltip** : Affiche les deux valeurs `8/10 (4/5)`

---

## ğŸ¨ Design & Styles

### Couleurs des Indicateurs
```css
Poids:    #2563eb (bleu)
Sommeil:  #16a34a (vert)  
Ã‰nergie:  #f59e0b (jaune/orange)
AppÃ©tit:  #ef4444 (rouge)
```

### Types de Lignes
- **Poids** : Ligne pleine Ã©paisse (`strokeWidth: 3`)
- **Bien-Ãªtre** : Lignes pointillÃ©es (`strokeDasharray: "6 4"`, `strokeWidth: 2`)

### Points sur les Courbes
- **Vue 1 Semaine** : Points visibles sur toutes les courbes
- **Vue 1 Mois & 3 Mois** : Points masquÃ©s (`dot: false`) pour fluiditÃ©

---

## ğŸ“Š Configuration du Graphique

### Axes
```javascript
// Axe Y Gauche - Poids
yAxisId: "poids"
orientation: "left" 
domain: ['dataMin - 0.5', 'dataMax + 0.5']
label: 'Poids (kg)'

// Axe Y Droit - Bien-Ãªtre  
yAxisId: "wellbeing"
orientation: "right"
domain: [0, 5]
label: 'Bien-Ãªtre (/5)'
```

### Axe X - Gestion des Dates
```javascript
// Espacement intelligent selon la pÃ©riode
interval: {
  'week': 0,                              // Toutes les dates
  'month': Math.floor(data.length / 6),   // 1 sur 6
  '3months': Math.floor(data.length / 8)  // 1 sur 8
}
```

### Grille
```javascript
strokeOpacity: {
  'week': 1,      // Grille normale
  'month': 0.5,   // Grille discrÃ¨te  
  '3months': 0.5  // Grille discrÃ¨te
}
```

---

## ğŸ›ï¸ ContrÃ´les Interactifs

### SÃ©lection Temporelle
3 boutons exclusifs :
- **1 Semaine** (dÃ©faut)
- **1 Mois** 
- **3 Mois**

### ContrÃ´les de VisibilitÃ© des MÃ©triques
4 boutons toggle indÃ©pendants Ã  droite du titre :

```javascript
const [visibleMetrics, setVisibleMetrics] = useState({
  poids: true,
  sommeil: true, 
  energie: true,
  appetit: true
});
```

#### Style des Boutons
- **Actif** : `bg-{color}-100 text-{color}-700 border border-{color}-200`
- **Inactif** : `bg-gray-100 text-gray-500 border border-gray-200`
- **Indicateur visuel** : Petite ligne dans le bouton avec style de courbe correspondant

---

## ğŸ” Tooltip PersonnalisÃ©

### Contenu AffichÃ©
```javascript
// Structure du tooltip
{
  dateLabel: "vendredi 12 septembre 2025",
  metrics: [
    { name: "Poids", value: "70.6 kg" },
    { name: "Sommeil", value: "6/10 (3/5)" }, // Double affichage
    { name: "Ã‰nergie", value: "2/5" },
    { name: "AppÃ©tit", value: "3/5" }
  ]
}
```

### Style
- Fond blanc avec bordure grise
- Ombre portÃ©e (`shadow-lg`)
- Largeur minimale : `min-w-48`
- Couleurs des valeurs correspondent aux couleurs des courbes

---

## ğŸ“ˆ Gestion des DonnÃ©es par PÃ©riode

### Sources de DonnÃ©es
```javascript
getData() {
  switch(timeRange) {
    case 'week': return sampleData;           // 9 derniers jours
    case 'month': return monthData.slice(-30); // 30 derniers jours  
    case '3months': return threeMonthsData.slice(-90); // 90 derniers jours
  }
}
```

---

## ğŸ“Š RÃ©sumÃ© des Moyennes

### Cartes de Statistiques
4 cartes en bas du graphique avec :
- **IcÃ´ne** reprÃ©sentative de chaque mÃ©trique
- **Valeur moyenne** calculÃ©e dynamiquement
- **Couleur de fond** correspondant Ã  l'indicateur
- **Sommeil affichÃ©** dans son format original `/10`

```javascript
// Calculs automatiques
avgPoids = (data.reduce((sum, d) => sum + d.poids, 0) / data.length).toFixed(1);
avgSommeil = (data.reduce((sum, d) => sum + d.sommeil, 0) / data.length).toFixed(1);
```

---

## ğŸ¯ Comportement Responsive

### Breakpoints
- **Mobile** : Graphique en pleine largeur
- **Desktop** : Maximum `max-w-6xl mx-auto`
- **ContrÃ´les** : Stack vertical sur mobile

### Dimensions
- **Hauteur graphique** : `450px`
- **Marges** : `{ top: 20, right: 50, left: 20, bottom: 20 }`

---

## âš¡ FonctionnalitÃ©s Interactives

### Au Survol
- **activeDot** : Point agrandi et bordÃ© blanc
- **Tooltip** : Apparition avec animation

### Clics
- **Boutons pÃ©riode** : Changement des donnÃ©es et re-render
- **Boutons mÃ©triques** : Toggle immÃ©diat de visibilitÃ© des courbes

---

## ğŸ› ï¸ Stack Technique

### Librairies Requises

#### ğŸ”´ Installation Obligatoire
```bash
npm install recharts
# ou
yarn add recharts
```

#### ğŸŸ¡ Installation Optionnelle  
```bash
npm install lucide-react
# ou  
yarn add lucide-react
```
*Pour les icÃ´nes (TrendingUp, Weight, Battery). Peut Ãªtre remplacÃ© par vos icÃ´nes existantes.*

#### âœ… DÃ©jÃ  Disponible dans le Projet
- **React** (inclus avec Next.js)
- **TypeScript** (dÃ©jÃ  configurÃ©) 
- **Tailwind CSS** (pour tous les styles)

### Composants Recharts UtilisÃ©s
- `LineChart`
- `Line` 
- `XAxis`, `YAxis`
- `CartesianGrid`
- `Tooltip`
- `ResponsiveContainer`
- `Legend`

---

## ğŸ“ Checklist d'ImplÃ©mentation

### âœ… Structure de Base
- [ ] Configuration du composant avec Ã©tats
- [ ] Gestion des donnÃ©es par pÃ©riode
- [ ] Conversion automatique sommeil (/10 â†’ /5)

### âœ… Graphique Principal
- [ ] Double axes Y (poids gauche, bien-Ãªtre droite)
- [ ] 4 courbes avec styles diffÃ©renciÃ©s
- [ ] Points conditionnels selon la pÃ©riode
- [ ] Grille adaptative

### âœ… ContrÃ´les Interactifs  
- [ ] 3 boutons de sÃ©lection temporelle
- [ ] 4 boutons toggle de visibilitÃ©
- [ ] Styles actif/inactif des boutons

### âœ… Tooltip AvancÃ©
- [ ] Affichage de la date complÃ¨te
- [ ] Valeurs formatÃ©es par mÃ©trique
- [ ] Couleurs correspondantes

### âœ… Interface Utilisateur
- [ ] Cartes de moyennes calculÃ©es
- [ ] Responsive design
- [ ] Ã‰tats de hover et transitions

### âœ… Optimisations Visuelles
- [ ] Espacement intelligent des dates
- [ ] OpacitÃ© adaptative de la grille
- [ ] LÃ©gendes et labels clairs

---

## ğŸ¨ Exemple d'IntÃ©gration

### Structure ComplÃ¨te du Composant Principal
```jsx
// SuiviTabs.tsx - Composant principal avec onglets
export default function SuiviTabs({ clientData, clientName }) {
  const [activeTab, setActiveTab] = useState('historique');

  return (
    <div className="w-full">
      {/* Navigation des onglets */}
      <div className="border-b border-gray-200">
        <nav className="-mb-px flex space-x-8">
          <button
            onClick={() => setActiveTab('historique')}
            className={`py-2 px-1 border-b-2 font-medium text-sm ${
              activeTab === 'historique' 
                ? 'border-blue-500 text-blue-600' 
                : 'border-transparent text-gray-500 hover:text-gray-700'
            }`}
          >
            Historique des enregistrements
          </button>
          <button
            onClick={() => setActiveTab('graphique')}
            className={`py-2 px-1 border-b-2 font-medium text-sm ${
              activeTab === 'graphique' 
                ? 'border-blue-500 text-blue-600' 
                : 'border-transparent text-gray-500 hover:text-gray-700'
            }`}
          >
            Graphique
          </button>
        </nav>
      </div>

      {/* Contenu des onglets */}
      <div className="mt-6">
        {activeTab === 'historique' && <HistoriqueTable data={clientData} />}
        {activeTab === 'graphique' && <CombinedChart data={clientData} clientName={clientName} />}
      </div>
    </div>
  );
}
```

### Utilisation dans la Page Client
```jsx
// Dans la page de suivi du client
<SuiviTabs 
  clientData={clientTrackingData}
  clientName="Maxime Schweiger"
/>
```

---

## ğŸ“‹ Notes d'ImplÃ©mentation

### âš ï¸ Points d'Attention
1. **Conversion sommeil** : Toujours diviser par 2 pour l'affichage graphique
2. **Gestion des donnÃ©es manquantes** : PrÃ©voir des valeurs par dÃ©faut
3. **Performance** : Limiter les re-renders lors des toggles
4. **AccessibilitÃ©** : Labels appropriÃ©s pour les boutons

### ğŸ”§ Personnalisations Possibles
- Ajouter d'autres pÃ©riodes (6 mois, 1 an)
- Exporter les graphiques en image
- Ajouter des seuils d'alerte visuels
- Annotations sur des dates spÃ©cifiques

---

*ğŸ“… DerniÃ¨re mise Ã  jour : 13 septembre 2025*  
*ğŸ¯ Version : 1.0 - SpÃ©cifications complÃ¨tes pour implÃ©mentation*